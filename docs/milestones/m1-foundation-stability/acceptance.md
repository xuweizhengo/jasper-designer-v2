# M1: Foundation Stability - 验收检查清单

## 验收概述

M1的验收标准是确保项目达到"可构建、可运行、类型安全、质量可控"的基础状态。所有检查项必须100%通过才能进入M2阶段。

---

## 🔧 构建系统验收

### A1.1 前端构建
- [ ] **A1.1.1** 执行`npm run build`命令成功完成 (退出码 0)
- [ ] **A1.1.2** 构建过程中无TypeScript错误
- [ ] **A1.1.3** 构建过程中无ESLint错误
- [ ] **A1.1.4** 构建输出文件完整 (dist/目录存在且包含必要文件)
- [ ] **A1.1.5** 构建时间合理 (<2分钟)

**验证命令**: `npm run build`  
**预期输出**: `✓ built in XXXms`

### A1.2 Rust后端构建
- [ ] **A1.2.1** 执行`cargo build`成功完成
- [ ] **A1.2.2** 执行`cargo clippy`无警告
- [ ] **A1.2.3** 执行`cargo fmt --check`通过
- [ ] **A1.2.4** 执行`cargo test`所有测试通过

**验证命令**: 
```bash
cd v2-tauri/src-tauri
cargo clippy -- -D warnings
cargo fmt --check  
cargo test
```

### A1.3 Tauri应用构建
- [ ] **A1.3.1** 执行`npm run tauri build`成功完成
- [ ] **A1.3.2** 生成的应用文件可以正常启动
- [ ] **A1.3.3** 应用窗口正常显示

**验证命令**: `cd v2-tauri && npm run tauri build`

---

## 🖥️ 应用启动验收

### A2.1 开发模式启动
- [ ] **A2.1.1** 执行`npm run tauri dev`成功启动
- [ ] **A2.1.2** 应用窗口在10秒内显示
- [ ] **A2.1.3** 前端开发服务器正常运行
- [ ] **A2.1.4** 热重载功能正常工作
- [ ] **A2.1.5** 控制台无严重错误信息

**验证步骤**:
1. 运行`cd v2-tauri && npm run tauri dev`
2. 等待应用窗口出现
3. 修改前端代码验证热重载
4. 检查控制台输出

### A2.2 生产模式启动
- [ ] **A2.2.1** 构建的应用可以独立启动
- [ ] **A2.2.2** 应用启动时间<5秒
- [ ] **A2.2.3** 应用界面完整显示
- [ ] **A2.2.4** 无依赖缺失错误

---

## 🎨 画布渲染验收

### A3.1 基础画布
- [ ] **A3.1.1** SVG画布正确显示
- [ ] **A3.1.2** 画布尺寸符合配置 (默认800x600)
- [ ] **A3.1.3** 网格背景正确渲染
- [ ] **A3.1.4** 画布边框正确显示
- [ ] **A3.1.5** 画布背景色正确应用

**验证步骤**:
1. 启动应用
2. 观察主界面画布区域
3. 确认网格线可见
4. 确认画布边界清晰

### A3.2 元素渲染
- [ ] **A3.2.1** 文字元素正确渲染
- [ ] **A3.2.2** 矩形元素正确渲染  
- [ ] **A3.2.3** 线条元素正确渲染
- [ ] **A3.2.4** 元素位置准确
- [ ] **A3.2.5** 元素样式正确应用

**验证方法**: 通过代码创建测试元素，观察渲染效果

---

## 📋 类型安全验收

### A4.1 TypeScript检查
- [ ] **A4.1.1** 所有.ts/.tsx文件无类型错误
- [ ] **A4.1.2** 启用strict模式无错误
- [ ] **A4.1.3** 前后端类型定义一致
- [ ] **A4.1.4** 组件props类型完整

**验证命令**: `npx tsc --noEmit --strict`

### A4.2 Rust类型检查
- [ ] **A4.2.1** 所有结构体正确派生Serialize/Deserialize
- [ ] **A4.2.2** 前后端数据结构匹配
- [ ] **A4.2.3** 错误类型完整定义
- [ ] **A4.2.4** API接口类型安全

**验证方法**: 检查类型定义文件一致性

---

## 🔧 开发工具验收

### A5.1 代码质量工具
- [ ] **A5.1.1** ESLint配置正确且无错误
- [ ] **A5.1.2** Prettier格式化正常工作
- [ ] **A5.1.3** 代码提交时自动格式化
- [ ] **A5.1.4** 编辑器智能提示正常

### A5.2 调试工具
- [ ] **A5.2.1** 浏览器开发者工具可用
- [ ] **A5.2.2** Rust日志输出正常
- [ ] **A5.2.3** 断点调试功能可用
- [ ] **A5.2.4** 错误信息清晰可读

---

## 🧪 测试覆盖验收

### A6.1 基础测试
- [ ] **A6.1.1** 至少有5个前端组件测试
- [ ] **A6.1.2** 至少有3个Rust单元测试
- [ ] **A6.1.3** 所有测试可以正常运行
- [ ] **A6.1.4** 测试覆盖率>60%

**验证命令**: `npm test` 和 `cargo test`

---

## 📚 文档验收

### A7.1 技术文档
- [ ] **A7.1.1** README.md包含完整的启动说明
- [ ] **A7.1.2** 开发环境配置文档完整
- [ ] **A7.1.3** 项目结构文档更新
- [ ] **A7.1.4** API文档基本完整

### A7.2 里程碑文档
- [ ] **A7.2.1** M1相关文档完整
- [ ] **A7.2.2** 问题和解决方案记录完整
- [ ] **A7.2.3** 技术决策记录完整

---

## ✅ 最终验收

### 综合测试场景

**场景1: 新开发者入职**
- [ ] 新开发者可以在30分钟内完成环境搭建
- [ ] 可以成功运行应用并看到界面
- [ ] 可以进行代码修改并看到效果

**场景2: 代码变更测试**  
- [ ] 修改前端代码后热重载正常
- [ ] 修改Rust代码后重新构建成功
- [ ] 类型错误能够及时发现和提示

**场景3: 生产构建测试**
- [ ] 生产构建可以成功完成
- [ ] 构建产物可以独立运行
- [ ] 性能表现符合预期

## 验收签署

**技术负责人**: ________________  
**日期**: ________________  
**验收结果**: [ ] 通过 [ ] 不通过  
**备注**: ________________

---

## 验收失败处理

如果任何检查项失败:
1. 记录失败原因到issues.md
2. 制定修复计划
3. 重新执行验收
4. 不允许进入M2直到所有项目通过