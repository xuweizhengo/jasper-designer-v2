# ğŸ“¦ Jasper Designer V2 æ‰“åŒ…å·¥å…·é›†

æä¾›å…¨é‡æ‰“åŒ…ã€å¢é‡æ‰“åŒ…ã€ç‰ˆæœ¬ç®¡ç†ç­‰å®Œæ•´çš„æ„å»ºè§£å†³æ–¹æ¡ˆã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä¸€é”®äº¤äº’å¼æ‰“åŒ…
```bash
./scripts/package.sh
```
æä¾›äº¤äº’å¼èœå•ï¼ŒåŒ…å«æ‰€æœ‰æ‰“åŒ…é€‰é¡¹ã€‚

### ç›´æ¥å‘½ä»¤è¡Œä½¿ç”¨ï¼ˆæ— äº¤äº’å‚æ•°ï¼‰

#### å…¨é‡æ‰“åŒ…ï¼ˆTauri CLI ä¼˜å…ˆï¼‰
```bash
# ç»Ÿä¸€å…¥å£ï¼ˆæ¨èï¼‰
./scripts/package.sh full --feature RELEASE-2.1 [--clean-history]

# æ·±åº¦æ¸…ç†ï¼ˆdist + src-tauri/target + vite ç¼“å­˜ + é‡æ–°å®‰è£…ä¾èµ–ï¼‰
DEEP_CLEAN=1 ./scripts/package.sh full --feature TRY-CLEAN

# å…¼å®¹æ—§è„šæœ¬
./scripts/package-full.sh "DATA-SOURCE-FEATURE" [--clean-history]
```

#### å¢é‡æ‰“åŒ…ï¼ˆæ™ºèƒ½æ£€æµ‹ + å¯å¤ç”¨åŸºç¡€åŒ…ï¼‰
```bash
# ç»Ÿä¸€å…¥å£ï¼ˆæ¨èï¼‰
./scripts/package.sh smart --feature UI-UPDATE [--base jasper-designer-v2-YYYYmmdd-HHMMSS]

# å…¼å®¹æ—§è„šæœ¬
./scripts/package-incremental.sh "UI-FIXES" ["jasper-designer-v2-YYYYmmdd-HHMMSS"]
```

## ğŸ“‹ æ‰“åŒ…ç­–ç•¥æŒ‡å—

### ğŸ—ï¸ å…¨é‡æ‰“åŒ…åœºæ™¯
- âœ… **æ–°åŠŸèƒ½å¼€å‘** - æ·»åŠ å¯¼å‡ºæ¨¡å—ã€æ•°æ®æºç®¡ç†ç­‰
- âœ… **Ruståç«¯ä¿®æ”¹** - æ–°å¢Tauriå‘½ä»¤ã€ä¿®æ”¹API
- âœ… **ä¾èµ–æ›´æ–°** - æ›´æ–°npmåŒ…ã€Cargoä¾èµ–
- âœ… **å‘å¸ƒç‰ˆæœ¬** - æ­£å¼ç‰ˆæœ¬å‘å¸ƒ
- âœ… **é‡å¤§Bugä¿®å¤** - ç¡®ä¿å®Œæ•´æ€§

### âš¡ å¢é‡æ‰“åŒ…åœºæ™¯  
- âœ… **UIè°ƒæ•´** - æ ·å¼ä¿®æ”¹ã€å¸ƒå±€ä¼˜åŒ–
- âœ… **å‰ç«¯ç»„ä»¶** - React/Solidç»„ä»¶ä¿®æ”¹
- âœ… **å¿«é€Ÿè¿­ä»£** - å¼€å‘æœŸé—´å¿«é€Ÿæµ‹è¯•
- âœ… **æ–‡æ¡£æ›´æ–°** - READMEã€å¸®åŠ©æ–‡æ¡£

## ğŸ› ï¸ åŠŸèƒ½ç‰¹æ€§

### å…¨é‡æ‰“åŒ… (`package-full.sh`)
- ğŸ§¹ **æ™ºèƒ½ç¼“å­˜æ¸…ç†** - æ¸…ç†æ‰€æœ‰æ„å»ºç¼“å­˜
- ğŸ” **æ¨¡å—æ£€æµ‹** - è‡ªåŠ¨æ£€æµ‹æ–°å¢æ¨¡å—
- ğŸ“š **å†å²ç‰ˆæœ¬ç®¡ç†** - å¯é€‰æ¸…ç†æ—§ç‰ˆæœ¬åˆ°archives
- âœ… **å®Œæ•´æ€§éªŒè¯** - æ„å»ºäº§ç‰©éªŒè¯
- ğŸ“‹ **è¯¦ç»†æ—¥å¿—** - å½©è‰²è¾“å‡ºï¼Œæ¸…æ™°çš„è¿›åº¦æŒ‡ç¤º

### å¢é‡æ‰“åŒ… (`package-incremental.sh`)
- ğŸ¯ **æ™ºèƒ½æ£€æµ‹** - è‡ªåŠ¨æ£€æµ‹å‰ç«¯/åç«¯å˜æ›´
- ğŸ“¦ **åŸºç¡€åŒ…å¤ç”¨** - åŸºäºç°æœ‰åŒ…è¿›è¡Œå¢é‡æ›´æ–°
- âš ï¸ **å®‰å…¨æé†’** - åç«¯å˜æ›´æ—¶æé†’ä½¿ç”¨å…¨é‡æ‰“åŒ…
- âš¡ **å¿«é€Ÿæ„å»º** - ä»…æ›´æ–°å˜æ›´éƒ¨åˆ†

### ç»Ÿä¸€å…¥å£ (`package.sh`)
- ğŸ¨ **äº¤äº’å¼ç•Œé¢** - å½©è‰²èœå•ï¼Œç”¨æˆ·å‹å¥½
- ğŸ“Š **ç‰ˆæœ¬ç®¡ç†** - æŸ¥çœ‹ã€æ¸…ç†å†å²ç‰ˆæœ¬
- ğŸ’¾ **ç£ç›˜ç›‘æ§** - æ˜¾ç¤ºå­˜å‚¨ä½¿ç”¨æƒ…å†µ
- ğŸ§ª **é¢„æ£€** - Node/NPM/Cargo/ESLint çŠ¶æ€æ‘˜è¦ï¼ˆå¯é€šè¿‡ `PRECHECK=0` è·³è¿‡ï¼‰

## ğŸ“ ç›®å½•ç»“æ„

```
builds/windows/
â”œâ”€â”€ jasper-designer-v2-FEATURE-20250823-120000/    # æœ€æ–°ç‰ˆæœ¬
â”œâ”€â”€ jasper-designer-v2-STABLE-20250823-110000/     # ç¨³å®šç‰ˆæœ¬  
â”œâ”€â”€ jasper-designer-v2-HOTFIX-INCR-20250823-115000/ # å¢é‡ç‰ˆæœ¬
â””â”€â”€ archives/                                       # å†å²ç‰ˆæœ¬å½’æ¡£
    â”œâ”€â”€ jasper-designer-v2-OLD-20250820-100000/
    â””â”€â”€ ...
```

## ğŸ“‹ åŒ…ä¿¡æ¯ä¸äº§ç‰©

æ¯ä¸ªåŒ…éƒ½åŒ…å«æ„å»ºä¿¡æ¯ï¼š

- **PACKAGE_INFO.md** - æ„å»ºæ‘˜è¦ï¼ˆåŒ…å/åŠŸèƒ½/æ—¶é—´/åˆ†æ”¯/æäº¤/æ¸…ç†çº§åˆ«/åŸºç¡€åŒ…/å¤§å°/SHA256ï¼‰
- **OPTIMIZATION-NOTES.md** - å…¨é‡æ„å»ºä¼˜åŒ–è¯´æ˜ï¼ˆå¦‚æœ‰ï¼‰
- äº§ç‰©ï¼šç›®å½•åŒ… + å‹ç¼©åŒ…ï¼ˆ.tar.gzï¼‰

> æ³¨ï¼šæ–°ç‰ˆ `package-full-optimized.sh` ä¸ `package-smart.sh` ä¼šè‡ªåŠ¨ç”Ÿæˆ PACKAGE_INFO.md

## âš ï¸ æ³¨æ„äº‹é¡¹

### æ–°å¢æ¨¡å—å¤„ç†
å½“ä½ æ·»åŠ æ–°æ¨¡å—ï¼ˆå¦‚å¯¼å‡ºåŠŸèƒ½ï¼‰æ—¶ï¼š

1. **ä»£ç ç»„ç»‡** - å°†æ¨¡å—æ”¾åœ¨åˆé€‚çš„ç›®å½•
   ```
   src/components/Export/        # å‰ç«¯å¯¼å‡ºç»„ä»¶
   src-tauri/src/export/         # åç«¯å¯¼å‡ºé€»è¾‘
   ```

2. **è‡ªåŠ¨æ£€æµ‹** - è„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹æ–°æ¨¡å—å¹¶è®°å½•

3. **å¿…é¡»å…¨é‡æ‰“åŒ…** - æ–°æ¨¡å—éœ€è¦å®Œæ•´æ„å»ºé“¾è·¯

### ç‰ˆæœ¬ç®¡ç†å»ºè®®

- **å¼€å‘æœŸé—´**: å¤šç”¨å¢é‡æ‰“åŒ…
- **åŠŸèƒ½å®Œæˆ**: å…¨é‡æ‰“åŒ…æµ‹è¯•  
- **å‘å¸ƒå‰**: å…¨é‡æ‰“åŒ… + æ¸…ç†å†å²ç‰ˆæœ¬
- **ç´§æ€¥ä¿®å¤**: è§†æƒ…å†µé€‰æ‹©æ‰“åŒ…æ–¹å¼

## ğŸ¯ ä½¿ç”¨ç¤ºä¾‹

### æ–°åŠŸèƒ½å¼€å‘æµç¨‹
```bash
# 1. å¼€å‘æ–°åŠŸèƒ½æ—¶
./scripts/package.sh
# é€‰æ‹©: 1) å…¨é‡æ‰“åŒ…
# è¾“å…¥åŠŸèƒ½å: EXPORT-MODULE

# 2. UIè°ƒæ•´æ—¶
./scripts/package.sh  
# é€‰æ‹©: 2) å¢é‡æ‰“åŒ…
# è¾“å…¥åŠŸèƒ½å: UI-POLISH

# 3. å‘å¸ƒå‰æ¸…ç†
./scripts/package.sh
# é€‰æ‹©: 1) å…¨é‡æ‰“åŒ…
# åŠŸèƒ½å: RELEASE-V2.1
# æ¸…ç†å†å²ç‰ˆæœ¬: y
```

---

**ç°åœ¨ä½ å¯ä»¥ä¸€é”®å®Œæˆæ‰€æœ‰æ‰“åŒ…æ“ä½œï¼Œè„šæœ¬ä¼šæ™ºèƒ½å¤„ç†æ¨¡å—æ£€æµ‹ã€ç‰ˆæœ¬ç®¡ç†ã€ç¼“å­˜æ¸…ç†ç­‰æ‰€æœ‰ç»†èŠ‚ï¼**

---

## â“ å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰

### 1) æ„å»ºæ—¶æŠ¥é”™ï¼š`The distDir configuration is set to "../dist" but this path doesn't exist`
- åŸå› ï¼šç›´æ¥ `cargo build` æ—¶ `dist/` æœªç”Ÿæˆï¼Œ`tauri::generate_context!` ç¼–è¯‘æœŸæ ¡éªŒå¤±è´¥ã€‚
- è§£å†³ï¼š
  - ä½¿ç”¨ `scripts/package.sh full` æˆ– `npm run tauri build`ï¼ˆä¼šå…ˆ `npm run build`ï¼‰
  - æˆ–å…ˆ `npm run build` å† `cargo build --manifest-path src-tauri/Cargo.toml --release`

### 2) è¾“å‡ºæç¤ºï¼š`æœªæ£€æµ‹åˆ° Tauri CLIï¼Œå›é€€åˆ° cargo build`
- åŸå› ï¼šæœ¬åœ°æ²¡æœ‰ `node_modules/.bin/tauri`ï¼Œä¸” `npx` æ— æ³•è”ç½‘æ‹‰å–ã€‚
- è§£å†³ï¼š
  - `npm ci` å®‰è£…ä¾èµ–ï¼Œæˆ–ç”¨ `DEEP_CLEAN=1 ./scripts/package.sh full` è®©è„šæœ¬è‡ªåŠ¨å®‰è£…
  - æ— æ³•å®‰è£…æ—¶ï¼Œè„šæœ¬ä¼šå…ˆ `npm run build` å† `cargo build`ï¼Œä»¥ä¿è¯ `dist/` å­˜åœ¨

### 3) éœ€è¦æ¸…ç†å“ªäº›ç¼“å­˜ï¼Ÿ
- çº§åˆ« Aï¼ˆé»˜è®¤ï¼‰ï¼šæ¸…ç† `dist/`
- çº§åˆ« Bï¼šA + æ¸…ç† `src-tauri/target/`ï¼ˆRust/ä¾èµ–å˜æ›´ï¼‰
- çº§åˆ« Cï¼šB + æ¸…ç† `node_modules/.vite` + `npm ci`ï¼ˆ`--deep-clean` æˆ– `DEEP_CLEAN=1`ï¼‰

### 4) æ‰“åŒ…ç»“æœåœ¨å“ªé‡Œï¼Ÿ
- è¾“å‡ºç›®å½•ï¼š`builds/windows/jasper-designer-v2-<FEATURE>-<YYYYmmdd-HHMMSS>/`
- å½’æ¡£ç›®å½•ï¼š`builds/windows/archives/`
- å®Œæ•´ä¿¡æ¯è§ `PACKAGE_INFO.md`

### 5) å¦‚ä½•åœ¨ CI ä¸­ä½¿ç”¨ï¼Ÿ
```bash
PRECHECK=0 ./scripts/package.sh full --feature CI-BUILD --clean-history
```
æˆ–ï¼š
```bash
npm ci
DEEP_CLEAN=1 ./scripts/package.sh full --feature CI-BUILD
```
